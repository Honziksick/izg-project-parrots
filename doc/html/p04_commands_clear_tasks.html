<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Izg project: 04 Čistící příkazy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Izg project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('p04_commands_clear_tasks.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">04 Čistící příkazy</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="ClearCommandTheory"></a>
Teorie: Čistění framebufferu</h1>
<p><a class="el" href="structFramebuffer.html" title="This structure represent a framebuffer A framebuffer is used as an output of rendering.">Framebuffer</a> je složen ze tří bufferů: paměť barvy (color buffer), paměť hloubky (depth buffer) a paměť stencilu (stencil buffer): </p><div class="image">
<object type="image/svg+xml" data="framebuffer.svg" width="600" style="pointer-events: none;"></object>
<div class="caption">
Framebuffer - tři buffery: color buffer, depth buffer a stencil buffer o stejném rozlišení. Framebuffer je plátno, kam se kreslí.</div></div>
<p> Všechny mají stejné rozlišení. Barevný buffer má několik kanálů (až čtyři), každý má stejnou velikost a typ. Hlouboký buffer má hloubku uloženou ve floatech. Stencilový buffer má hodnotu uloženou v 8bitovém čísle. <a class="el" href="structFramebuffer.html" title="This structure represent a framebuffer A framebuffer is used as an output of rendering.">Framebuffer</a> je koncipován tak, že pixel na souřadnicích [0,0] je v levém dolním rohu, osa X je doprava a oxy Y nahoru. Je možné jej přetočit vzhůru nohama pomocí příznaku <a class="el" href="structFramebuffer.html#a5227afe8482c1670d87d34cf61ec08da">Framebuffer::yReversed</a>. </p><div class="image">
<object type="image/svg+xml" data="yReversed.svg" width="400" style="pointer-events: none;"></object>
<div class="caption">
Framebuffer může být překlopený vzhůru nohama. Je to určeno komponentou yReversed. V taktovém případě je nultý pixel v levém horním rohu framebufferu.</div></div>
<p>Všechny framebuffery se nachází v paměti grafické karty (<a class="el" href="structGPUMemory.html">GPUMemory</a>): </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structFramebuffer.html">Framebuffer</a>{</div>
<div class="line">  uint32_t <a class="code hl_variable" href="structFramebuffer.html#ad2efd3ac1249da4ce70d478cd48d0e22">width</a>     = 0    ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structFramebuffer.html#a614fd13812430c2ffb379b3b050780c4">height</a>    = 0    ; </div>
<div class="line">  <span class="keywordtype">bool</span>     <a class="code hl_variable" href="structFramebuffer.html#a5227afe8482c1670d87d34cf61ec08da">yReversed</a> = <span class="keyword">false</span>; </div>
<div class="line">  <a class="code hl_struct" href="structImage.html">Image</a>    <a class="code hl_variable" href="structFramebuffer.html#aaaf692c4a3881fdd17df05c0d9b0811f">color</a>            ; </div>
<div class="line">  <a class="code hl_struct" href="structImage.html">Image</a>    <a class="code hl_variable" href="structFramebuffer.html#ad56ef80596abe229e99657865ae8a79b">depth</a>            ; </div>
<div class="line">  <a class="code hl_struct" href="structImage.html">Image</a>    <a class="code hl_variable" href="structFramebuffer.html#ac2732cb27f34176ed1a1acc001c18a88">stencil</a>          ; </div>
<div class="line">};</div>
<div class="ttc" id="astructFramebuffer_html"><div class="ttname"><a href="structFramebuffer.html">Framebuffer</a></div><div class="ttdoc">This structure represent a framebuffer A framebuffer is used as an output of rendering.</div><div class="ttdef"><b>Definition</b> gpu.hpp:293</div></div>
<div class="ttc" id="astructFramebuffer_html_a5227afe8482c1670d87d34cf61ec08da"><div class="ttname"><a href="structFramebuffer.html#a5227afe8482c1670d87d34cf61ec08da">Framebuffer::yReversed</a></div><div class="ttdeci">bool yReversed</div><div class="ttdoc">is y axis flipped?</div><div class="ttdef"><b>Definition</b> gpu.hpp:296</div></div>
<div class="ttc" id="astructFramebuffer_html_a614fd13812430c2ffb379b3b050780c4"><div class="ttname"><a href="structFramebuffer.html#a614fd13812430c2ffb379b3b050780c4">Framebuffer::height</a></div><div class="ttdeci">uint32_t height</div><div class="ttdoc">height of frame buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:295</div></div>
<div class="ttc" id="astructFramebuffer_html_aaaf692c4a3881fdd17df05c0d9b0811f"><div class="ttname"><a href="structFramebuffer.html#aaaf692c4a3881fdd17df05c0d9b0811f">Framebuffer::color</a></div><div class="ttdeci">Image color</div><div class="ttdoc">color buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:297</div></div>
<div class="ttc" id="astructFramebuffer_html_ac2732cb27f34176ed1a1acc001c18a88"><div class="ttname"><a href="structFramebuffer.html#ac2732cb27f34176ed1a1acc001c18a88">Framebuffer::stencil</a></div><div class="ttdeci">Image stencil</div><div class="ttdoc">stencil buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:299</div></div>
<div class="ttc" id="astructFramebuffer_html_ad2efd3ac1249da4ce70d478cd48d0e22"><div class="ttname"><a href="structFramebuffer.html#ad2efd3ac1249da4ce70d478cd48d0e22">Framebuffer::width</a></div><div class="ttdeci">uint32_t width</div><div class="ttdoc">width of frame buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:294</div></div>
<div class="ttc" id="astructFramebuffer_html_ad56ef80596abe229e99657865ae8a79b"><div class="ttname"><a href="structFramebuffer.html#ad56ef80596abe229e99657865ae8a79b">Framebuffer::depth</a></div><div class="ttdeci">Image depth</div><div class="ttdoc">depth buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:298</div></div>
<div class="ttc" id="astructImage_html"><div class="ttname"><a href="structImage.html">Image</a></div><div class="ttdoc">This structure represents 2D memory of image. 2D images are used as textures and color or depth buffe...</div><div class="ttdef"><b>Definition</b> gpu.hpp:30</div></div>
</div><!-- fragment --><p> <a class="el" href="structFramebuffer.html" title="This structure represent a framebuffer A framebuffer is used as an output of rendering.">Framebuffer</a> je poměrně složitá struktura. Je složena ze: </p><ul>
<li>
tři <a class="el" href="structImage.html">Image</a> - barva, hloubka, stencil, </li>
<li>
šířka, </li>
<li>
výška, </li>
<li>
yReversed - v případě, že je framebuffer vzhůru nohama. </li>
</ul>
<p><a class="el" href="structImage.html">Image</a> je struktura obsahující 2D data. Je využívána u framebufferů a textur. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structImage.html">Image</a>{</div>
<div class="line">  <span class="keyword">enum</span> <a class="code hl_enumeration" href="structImage.html#afe74defc826aae605cb2214cbf34c5eb">Channel</a>{</div>
<div class="line">    RED   = 0,</div>
<div class="line">    GREEN    ,</div>
<div class="line">    BLUE     ,</div>
<div class="line">    ALPHA    ,</div>
<div class="line">  };</div>
<div class="line">  <span class="keyword">enum</span> <a class="code hl_enumeration" href="structImage.html#a1d53cd4fd9e5b67d38d49bc2c5ebd0db">Format</a>{</div>
<div class="line">    U8 ,</div>
<div class="line">    F32,</div>
<div class="line">  };</div>
<div class="line">  <span class="keywordtype">void</span>*    <a class="code hl_variable" href="structImage.html#a2d9eabf3628b454331420e4b377538b9">data</a>            = nullptr               ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structImage.html#af20c22715fcc14fe41d929a5127ac897">channels</a>        = 4                     ; </div>
<div class="line">  <a class="code hl_enumeration" href="structImage.html#a1d53cd4fd9e5b67d38d49bc2c5ebd0db">Format</a>   <a class="code hl_variable" href="structImage.html#a98d0e7ac2ffeca933536b705cbdc5dba">format</a>          = U8                    ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structImage.html#a85765e057e50aaa2da6ffd1e7085f52a">pitch</a>           = 0                     ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structImage.html#add6fee24fd0db09ee35432b6541e5018">bytesPerPixel</a>   = 0                     ; </div>
<div class="line">  <a class="code hl_enumeration" href="structImage.html#afe74defc826aae605cb2214cbf34c5eb">Channel</a>  <a class="code hl_variable" href="structImage.html#a86d38f6adc2c4bc8285c908460634eac">channelTypes</a>[4] = {RED,GREEN,BLUE,ALPHA}; </div>
<div class="line">};</div>
<div class="ttc" id="astructImage_html_a1d53cd4fd9e5b67d38d49bc2c5ebd0db"><div class="ttname"><a href="structImage.html#a1d53cd4fd9e5b67d38d49bc2c5ebd0db">Image::Format</a></div><div class="ttdeci">Format</div><div class="ttdoc">Format of data.</div><div class="ttdef"><b>Definition</b> gpu.hpp:43</div></div>
<div class="ttc" id="astructImage_html_a2d9eabf3628b454331420e4b377538b9"><div class="ttname"><a href="structImage.html#a2d9eabf3628b454331420e4b377538b9">Image::data</a></div><div class="ttdeci">void * data</div><div class="ttdoc">pointer to image data</div><div class="ttdef"><b>Definition</b> gpu.hpp:47</div></div>
<div class="ttc" id="astructImage_html_a85765e057e50aaa2da6ffd1e7085f52a"><div class="ttname"><a href="structImage.html#a85765e057e50aaa2da6ffd1e7085f52a">Image::pitch</a></div><div class="ttdeci">uint32_t pitch</div><div class="ttdoc">size of row in bytes</div><div class="ttdef"><b>Definition</b> gpu.hpp:50</div></div>
<div class="ttc" id="astructImage_html_a86d38f6adc2c4bc8285c908460634eac"><div class="ttname"><a href="structImage.html#a86d38f6adc2c4bc8285c908460634eac">Image::channelTypes</a></div><div class="ttdeci">Channel channelTypes[4]</div><div class="ttdoc">only for colors - what colors the channels represent</div><div class="ttdef"><b>Definition</b> gpu.hpp:52</div></div>
<div class="ttc" id="astructImage_html_a98d0e7ac2ffeca933536b705cbdc5dba"><div class="ttname"><a href="structImage.html#a98d0e7ac2ffeca933536b705cbdc5dba">Image::format</a></div><div class="ttdeci">Format format</div><div class="ttdoc">type of data for every channel</div><div class="ttdef"><b>Definition</b> gpu.hpp:49</div></div>
<div class="ttc" id="astructImage_html_add6fee24fd0db09ee35432b6541e5018"><div class="ttname"><a href="structImage.html#add6fee24fd0db09ee35432b6541e5018">Image::bytesPerPixel</a></div><div class="ttdeci">uint32_t bytesPerPixel</div><div class="ttdoc">size of pixel in bytes</div><div class="ttdef"><b>Definition</b> gpu.hpp:51</div></div>
<div class="ttc" id="astructImage_html_af20c22715fcc14fe41d929a5127ac897"><div class="ttname"><a href="structImage.html#af20c22715fcc14fe41d929a5127ac897">Image::channels</a></div><div class="ttdeci">uint32_t channels</div><div class="ttdoc">number of color channels</div><div class="ttdef"><b>Definition</b> gpu.hpp:48</div></div>
<div class="ttc" id="astructImage_html_afe74defc826aae605cb2214cbf34c5eb"><div class="ttname"><a href="structImage.html#afe74defc826aae605cb2214cbf34c5eb">Image::Channel</a></div><div class="ttdeci">Channel</div><div class="ttdoc">Channel type.</div><div class="ttdef"><b>Definition</b> gpu.hpp:34</div></div>
</div><!-- fragment --><p> <a class="el" href="structImage.html" title="This structure represents 2D memory of image. 2D images are used as textures and color or depth buffe...">Image</a> je inspirovaný strukturami <a href="https://wiki.libsdl.org/SDL2/SDL_Surface">SDL_Surface</a> a <a href="https://wiki.libsdl.org/SDL2/SDL_PixelFormat">SDL_PixelFormat</a>.<br  />
 Struktura obsahuje několik položek: </p><ul>
<li>
<a class="el" href="structImage.html#a2d9eabf3628b454331420e4b377538b9" title="pointer to image data">Image::data</a> - ukazatel na začátek, </li>
<li>
<a class="el" href="structImage.html#af20c22715fcc14fe41d929a5127ac897" title="number of color channels">Image::channels</a> - počet kanálů, </li>
<li>
<a class="el" href="structImage.html#a98d0e7ac2ffeca933536b705cbdc5dba" title="type of data for every channel">Image::format</a> - formát kanálů, </li>
<li>
<a class="el" href="structImage.html#a85765e057e50aaa2da6ffd1e7085f52a" title="size of row in bytes">Image::pitch</a> - šířka řádku v bajtech, </li>
<li>
<a class="el" href="structImage.html#add6fee24fd0db09ee35432b6541e5018" title="size of pixel in bytes">Image::bytesPerPixel</a> - velikost jednoho pixelu v bajtech, </li>
<li>
<a class="el" href="structImage.html#a86d38f6adc2c4bc8285c908460634eac" title="only for colors - what colors the channels represent">Image::channelTypes</a> - tabulka mapování čísla kanálu na typ kanálu. </li>
</ul>
<p>Adresování dat může být poněkud komplikované... </p><div class="fragment"><div class="line"><span class="comment">// Pixel [x,y] začíná na adrese:</span></div>
<div class="line">uint8_t* pixelStart = ((uint8_t*)data) + y*pitch + x*bytesPerPixel;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Pokud jsou data typu float</span></div>
<div class="line"><span class="keywordflow">if</span>(format == Image::FLOAT32){</div>
<div class="line">  <span class="keywordtype">float</span>*pixelf = (<span class="keywordtype">float</span>*)pixelStart;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Kanál 0 odpovídá barvě channelTypes[0]</span></div>
<div class="line">  <span class="comment">// tzn. 0 nemusí být RED</span></div>
<div class="line">  pixelf[0] = 0.5f;</div>
<div class="line">}</div>
<div class="line"><span class="comment">// Pokud jsou data typu uint8_t</span></div>
<div class="line"><span class="keywordflow">if</span>(format == Image::UINT8){</div>
<div class="line">  uint8_t*pixelu = (uint8_t*)pixelStart;</div>
<div class="line">  pixelu[0] = 127;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Čistící příkazy (<a class="el" href="structClearColorCommand.html">ClearColorCommand</a>, <a class="el" href="structClearDepthCommand.html">ClearDepthCommand</a>, <a class="el" href="structClearStencilCommand.html">ClearStencilCommand</a>) vypadají takto: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structClearColorCommand.html">ClearColorCommand</a>{</div>
<div class="line">  glm::vec4 <a class="code hl_variable" href="structClearColorCommand.html#ac048ceeb3b061652c4202dde6e38790a">value</a> = glm::vec4(0); </div>
<div class="line">};</div>
<div class="ttc" id="astructClearColorCommand_html"><div class="ttname"><a href="structClearColorCommand.html">ClearColorCommand</a></div><div class="ttdoc">This structure represents clear color buffer command. The structure stores clear color value to which...</div><div class="ttdef"><b>Definition</b> gpu.hpp:443</div></div>
<div class="ttc" id="astructClearColorCommand_html_ac048ceeb3b061652c4202dde6e38790a"><div class="ttname"><a href="structClearColorCommand.html#ac048ceeb3b061652c4202dde6e38790a">ClearColorCommand::value</a></div><div class="ttdeci">glm::vec4 value</div><div class="ttdoc">color buffer will be cleared by this value</div><div class="ttdef"><b>Definition</b> gpu.hpp:444</div></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structClearDepthCommand.html">ClearDepthCommand</a>{</div>
<div class="line">  <span class="keywordtype">float</span> <a class="code hl_variable" href="structClearDepthCommand.html#a9b3ff257d36af1ace40c5a122044db57">value</a> = 1e10; </div>
<div class="line">};</div>
<div class="ttc" id="astructClearDepthCommand_html"><div class="ttname"><a href="structClearDepthCommand.html">ClearDepthCommand</a></div><div class="ttdoc">[ClearColorCommand]</div><div class="ttdef"><b>Definition</b> gpu.hpp:453</div></div>
<div class="ttc" id="astructClearDepthCommand_html_a9b3ff257d36af1ace40c5a122044db57"><div class="ttname"><a href="structClearDepthCommand.html#a9b3ff257d36af1ace40c5a122044db57">ClearDepthCommand::value</a></div><div class="ttdeci">float value</div><div class="ttdoc">depth buffer will be cleared by this value</div><div class="ttdef"><b>Definition</b> gpu.hpp:454</div></div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structClearStencilCommand.html">ClearStencilCommand</a>{</div>
<div class="line">  uint8_t <a class="code hl_variable" href="structClearStencilCommand.html#a86c2f79f16054f54c08df679595d02a6">value</a> = 0u; </div>
<div class="line">};</div>
<div class="ttc" id="astructClearStencilCommand_html"><div class="ttname"><a href="structClearStencilCommand.html">ClearStencilCommand</a></div><div class="ttdoc">[ClearDepthCommand]</div><div class="ttdef"><b>Definition</b> gpu.hpp:463</div></div>
<div class="ttc" id="astructClearStencilCommand_html_a86c2f79f16054f54c08df679595d02a6"><div class="ttname"><a href="structClearStencilCommand.html#a86c2f79f16054f54c08df679595d02a6">ClearStencilCommand::value</a></div><div class="ttdeci">uint8_t value</div><div class="ttdoc">stencil buffer will be cleared by this value</div><div class="ttdef"><b>Definition</b> gpu.hpp:464</div></div>
</div><!-- fragment --><p> Čistící příkazy obsahují hodnotu, na kterou se mají vyčistit barevný, hloubkový nebo stencilový buffer. Všimněte si, že barva je uložena jako floatový vektor glm::vec4. V tomto vektoru je barva v rozsahu [0,1] typu float. Čistící barvu musíte z toho rozsahu převést na správný typ podle typu barevného bufferu.<br  />
</p>
<h1><a class="anchor" id="ClearCommandTask"></a>
Úkol 1: Čištění framebufferu</h1>
<p>Vašim úkolem bude naprogramovat obsluhu čistících příkazů. K tomuto úkolu se vážou testy:<br  />
 </p><div class="fragment"><div class="line">./izgProject -c --test 10 --up-to-test</div>
</div><!-- fragment --><p> Takto vypadá pseudokód, jak můžete začít psát: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> clearColor(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>&amp;mem,<a class="code hl_struct" href="structClearColorCommand.html">ClearColorCommand</a> cmd){</div>
<div class="line">  <span class="comment">// ukázka čistícího příkazu</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// výběr framebufferu</span></div>
<div class="line">  <a class="code hl_struct" href="structFramebuffer.html">Framebuffer</a>*fbo = mem.<a class="code hl_variable" href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">framebuffers</a>+mem.<a class="code hl_variable" href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">activatedFramebuffer</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// obsahuje framebuffer barevný buffer?</span></div>
<div class="line">  <span class="keywordflow">if</span>(fbo-&gt;<a class="code hl_variable" href="structFramebuffer.html#aaaf692c4a3881fdd17df05c0d9b0811f">color</a>.<a class="code hl_variable" href="structImage.html#a2d9eabf3628b454331420e4b377538b9">data</a>){</div>
<div class="line">    <span class="keywordflow">for</span>(uint32_t y=0;y&lt;fbo-&gt;<a class="code hl_variable" href="structFramebuffer.html#a614fd13812430c2ffb379b3b050780c4">height</a>;++y)</div>
<div class="line">      <span class="keywordflow">for</span>(uint32_t x=0;x&lt;fbo-&gt;<a class="code hl_variable" href="structFramebuffer.html#ad2efd3ac1249da4ce70d478cd48d0e22">width</a>;++x){</div>
<div class="line">        <span class="keywordtype">void</span>*pixelStart = <a class="code hl_function" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a6842746ca06d8003aba5565fe7a7d7d6">getPixel</a>(fbo-&gt;<a class="code hl_variable" href="structFramebuffer.html#aaaf692c4a3881fdd17df05c0d9b0811f">color</a>,x,y);</div>
<div class="line">        <span class="keywordflow">for</span>(uint32_t i=0;i&lt;fbo-&gt;<a class="code hl_variable" href="structFramebuffer.html#aaaf692c4a3881fdd17df05c0d9b0811f">color</a>.<a class="code hl_variable" href="structImage.html#af20c22715fcc14fe41d929a5127ac897">channels</a>;++i){</div>
<div class="line">          <span class="comment">//...</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">  <span class="comment">//...</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> <a class="code hl_function" href="studentSolution_2src_2studentSolution_2gpu_8cpp.html#acb235bf1bd34504bf58828aac4d40b11">student_GPU_run</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>&amp;mem,<a class="code hl_struct" href="structCommandBuffer.html">CommandBuffer</a> <span class="keyword">const</span>&amp;cb){</div>
<div class="line">  <span class="keywordflow">for</span>(uint32_t i=0;i&lt;cb.<a class="code hl_variable" href="structCommandBuffer.html#a5a4e731514b5998dad67189ca3612f3e">nofCommands</a>;++i){</div>
<div class="line">    <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a21e038f5b8958e203d28bc4f18472352">CommandType</a> type = cb.<a class="code hl_variable" href="structCommandBuffer.html#addba1f7b3ffb5ad52a484d1b815436df">commands</a>[i].<a class="code hl_variable" href="structCommand.html#afd23b7e189739dbae6c0f2e93ba02c81">type</a>;</div>
<div class="line">    <a class="code hl_union" href="unionCommandData.html">CommandData</a> data = cb.<a class="code hl_variable" href="structCommandBuffer.html#addba1f7b3ffb5ad52a484d1b815436df">commands</a>[i].<a class="code hl_variable" href="structCommand.html#ab4bcc3a5664498309ec42d4bb0e1c872">data</a>;</div>
<div class="line">    <span class="keywordflow">if</span>(type == <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a21e038f5b8958e203d28bc4f18472352add0cc7d0802d17e157ea28b402e19bc5">CommandType::CLEAR_COLOR</a>)</div>
<div class="line">      clearColor(mem,data.<a class="code hl_variable" href="unionCommandData.html#a51a6194d91c06cb76aa40f6adef91a94">clearColorCommand</a>);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a21e038f5b8958e203d28bc4f18472352"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a21e038f5b8958e203d28bc4f18472352">CommandType</a></div><div class="ttdeci">CommandType</div><div class="ttdoc">[UserCommand]</div><div class="ttdef"><b>Definition</b> gpu.hpp:608</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a21e038f5b8958e203d28bc4f18472352add0cc7d0802d17e157ea28b402e19bc5"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a21e038f5b8958e203d28bc4f18472352add0cc7d0802d17e157ea28b402e19bc5">CommandType::CLEAR_COLOR</a></div><div class="ttdeci">@ CLEAR_COLOR</div><div class="ttdoc">clear color buffer command</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a6842746ca06d8003aba5565fe7a7d7d6"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a6842746ca06d8003aba5565fe7a7d7d6">getPixel</a></div><div class="ttdeci">void * getPixel(Image &amp;image, uint32_t x, uint32_t y)</div><div class="ttdoc">[Program]</div><div class="ttdef"><b>Definition</b> gpu.hpp:267</div></div>
<div class="ttc" id="astructCommandBuffer_html"><div class="ttname"><a href="structCommandBuffer.html">CommandBuffer</a></div><div class="ttdoc">[Command]</div><div class="ttdef"><b>Definition</b> gpu.hpp:671</div></div>
<div class="ttc" id="astructCommandBuffer_html_a5a4e731514b5998dad67189ca3612f3e"><div class="ttname"><a href="structCommandBuffer.html#a5a4e731514b5998dad67189ca3612f3e">CommandBuffer::nofCommands</a></div><div class="ttdeci">uint32_t nofCommands</div><div class="ttdoc">number of used commands in command buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:673</div></div>
<div class="ttc" id="astructCommandBuffer_html_addba1f7b3ffb5ad52a484d1b815436df"><div class="ttname"><a href="structCommandBuffer.html#addba1f7b3ffb5ad52a484d1b815436df">CommandBuffer::commands</a></div><div class="ttdeci">Command commands[maxCommands]</div><div class="ttdoc">array of commands</div><div class="ttdef"><b>Definition</b> gpu.hpp:674</div></div>
<div class="ttc" id="astructCommand_html_ab4bcc3a5664498309ec42d4bb0e1c872"><div class="ttname"><a href="structCommand.html#ab4bcc3a5664498309ec42d4bb0e1c872">Command::data</a></div><div class="ttdeci">CommandData data</div><div class="ttdoc">data of the command</div><div class="ttdef"><b>Definition</b> gpu.hpp:660</div></div>
<div class="ttc" id="astructCommand_html_afd23b7e189739dbae6c0f2e93ba02c81"><div class="ttname"><a href="structCommand.html#afd23b7e189739dbae6c0f2e93ba02c81">Command::type</a></div><div class="ttdeci">CommandType type</div><div class="ttdoc">type of the command</div><div class="ttdef"><b>Definition</b> gpu.hpp:661</div></div>
<div class="ttc" id="astructGPUMemory_html"><div class="ttname"><a href="structGPUMemory.html">GPUMemory</a></div><div class="ttdoc">[BackfaceCulling]</div><div class="ttdef"><b>Definition</b> gpu.hpp:402</div></div>
<div class="ttc" id="astructGPUMemory_html_abd0d80589104a936db46ae766bc7975e"><div class="ttname"><a href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">GPUMemory::framebuffers</a></div><div class="ttdeci">Framebuffer * framebuffers</div><div class="ttdoc">framebuffer - output of rendering, 0 is default framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:414</div></div>
<div class="ttc" id="astructGPUMemory_html_acd06344c1c43bef8df606d6664fee4b4"><div class="ttname"><a href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">GPUMemory::activatedFramebuffer</a></div><div class="ttdeci">uint32_t activatedFramebuffer</div><div class="ttdoc">id of activated framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:416</div></div>
<div class="ttc" id="astudentSolution_2src_2studentSolution_2gpu_8cpp_html_acb235bf1bd34504bf58828aac4d40b11"><div class="ttname"><a href="studentSolution_2src_2studentSolution_2gpu_8cpp.html#acb235bf1bd34504bf58828aac4d40b11">student_GPU_run</a></div><div class="ttdeci">void student_GPU_run(GPUMemory &amp;mem, CommandBuffer const &amp;cb)</div><div class="ttdoc">[student_GPU_run]</div><div class="ttdef"><b>Definition</b> gpu.cpp:12</div></div>
<div class="ttc" id="aunionCommandData_html"><div class="ttname"><a href="unionCommandData.html">CommandData</a></div><div class="ttdoc">[CommandType]</div><div class="ttdef"><b>Definition</b> gpu.hpp:634</div></div>
<div class="ttc" id="aunionCommandData_html_a51a6194d91c06cb76aa40f6adef91a94"><div class="ttname"><a href="unionCommandData.html#a51a6194d91c06cb76aa40f6adef91a94">CommandData::clearColorCommand</a></div><div class="ttdeci">ClearColorCommand clearColorCommand</div><div class="ttdoc">clear color buffer command data</div><div class="ttdef"><b>Definition</b> gpu.hpp:645</div></div>
</div><!-- fragment --><h2><a class="anchor" id="clear"></a>
Test 8 - čištění framebufferu</h2>
<div class="fragment"><div class="line">./izgProject -c --test 8</div>
</div><!-- fragment --><p> Tento test zkouší vyčistit framebuffer.</p>
<h2><a class="anchor" id="clearPartial"></a>
Test 9 - čištění částečného framebufferu</h2>
<div class="fragment"><div class="line">./izgProject -c --test 9</div>
</div><!-- fragment --><p> Tento test zkouší vyčistit částečně specifikovaný framebuffer. Paměť barvy, paměť hloubky i stencil může být prázdná (nullptr), v takovém případě čištění neproběhne.</p>
<h2><a class="anchor" id="clearMultipleFBO"></a>
Test 10 - zápis do vícero framebufferů</h2>
<div class="fragment"><div class="line">./izgProject -c --test 10</div>
</div><!-- fragment --><p> Tento test zkouší čistit různé <a class="el" href="structFramebuffer.html">Framebuffer(y)</a>, ne jen nultý. Čistící příkaz čistí aktivní framebuffer. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
