<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Izg project: 07 Vektorová čast GPU: část vertexů</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Izg project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('p07_pipeline_vector_part_tasks.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">07 Vektorová čast GPU: část vertexů</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="vector_part_theory_pipeline"></a>
Vertexová část zobrazovacího řetězce</h1>
<p>Cílem vektorové části je zpravovávat vektorovou grafiku: body, trojúhelníky. Většinou se tím myslí: čtení z paměti a sestavení vrcholů, vyvolání vertex shaderu nad každým vrcholem, sestavení trojúhelníků, ořez, perspektivní dělení a připravení pro rasterizaci (viewport transformace). Rasterizace rasterizuje připravené trojúhelníky a produkuje fragmenty (čtvercové úlomky trojúhelníku, které se nakonec zapíšou do framebufferu). Cílem rastrové části je obarvit tyto fragmenty pomocí fragment shaderu, odfiltrovat fragmenty, které jsou příliš daleko (depth test) a smíchat je s framebufferem (blending).<br  />
 Ze začátku implementace kreslení se budete zabývat pouze vektorovou částí - a to částí před vertex shaderem (včetně). </p><div class="image">
<object type="image/svg+xml" data="pipeline_vertex_part.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Vektorová část je složena z vertex assembly jednotky, vertex processoru a části za vertex shaderem.</div></div>
<p> Vertex assembly jednota se stará o sestavování vrcholů. Vertex processor tyto vrcholy "prožene" uživatelem specifikovaným vertex shaderem. Část za vertex shaderem se stará o sestavení trojúhelníku, jeho ořezu a ztransformování pro rasterizaci.<br  />
</p>
<h2><a class="anchor" id="index_draw"></a>
Neindexované a indexované kreslení</h2>
<p>Existují dva druhy vykreslování:</p><ul>
<li>neindexované,</li>
<li>indexované.</li>
</ul>
<p>Indexované kreslení je způsob snížení redundance dat s využitím indexů na vrcholy. </p><div class="image">
<object type="image/svg+xml" data="drawElements.svg" style="pointer-events: none;"></object>
<div class="caption">
Levá strana obrázku zobrazuje neindexované kreslení dvou trojúhelníků, pravá indexované. U neindexovaného kreslení je potřeba akorát vertexového bufferu, který obsahuje vertex. Avšak v takovém případě jsou některé vrcholy zduplikovány (V1=V4, V2=V3). U indexovaného kreslení je navíc potřeba indexačního bufferu, tím je zajištěna redukce dat. Vrcholy jsou číslovány (gl_VertexID). U neindexovaného kreslení je gl_VertexID rovno pořadovenému číslu, u indexovaného kreslení hodnotě z indexačního bufferu.</div></div>
<p>Vrcholy jsou během kreslení číslovány pomocí čísla <a class="el" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">InVertex::gl_VertexID</a>. <a class="el" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">InVertex::gl_VertexID</a> je unikátní číslo vrcholu do paměti vertexů, na jehož základě pracuje Vertex Assembly jednotka.</p>
<h2><a class="anchor" id="VertexAssembly"></a>
Vertex Assembly jednotka</h2>
<p>Vertex Assembly (nebo taky Vertex Puller, Vertex Specification, ...) je zařízení na grafické kartě, které se stará o sestavení vrcholů. </p><div class="image">
<object type="image/svg+xml" data="vertexAssemblyUnit.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Vertex Assembly jednotka sestavuje vrcholy z paměti (většinou). K tomu potřebuje tabulku nastavení (VertexArray) a číslo vrcholu.</div></div>
<p>Vertex není jen bod v prostoru. Vertex je uživatelem specifikovaná struktura. Uživatel může chtít do vrcholů uložit různá data, proto do nich může přidat vertex attributy. Kromě uživatelem specifikovaných atributů, obsahují i pevně vestavěné atributy (gl_VertexID a další).</p>
<div class="image">
<object type="image/svg+xml" data="vertex.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Vrchol je struktura dat. Ve struktuře jsou vertex attributy. Ty mívají uživatelem specifikovaný význam (třeba pozice, normála, ...). Vertex Assembly sestavuje InVertex, který je poslán jako vstup do vertex shaderu.</div></div>
<p>Sestavené vcholy jsou posílány do vertex shaderu pro zpracování uživetelem definovaným kódem. Vertex shader transformuje vrcholy maticemi a vypočítává výstupní vrcholy. </p><div class="image">
<object type="image/svg+xml" data="vertexInOut.svg" width="400" style="pointer-events: none;"></object>
<div class="caption">
Jsou dva typy vrcholů. Ty, které sestavuje jednotka Vertex Assembly a vstupují do vertex shaderu. A ty, které jsou výstupem vertex shaderu.</div></div>
<p> Vrchol (<a class="el" href="structInVertex.html">InVertex</a>) je složen z <a class="el" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a> vertex attributů, každý může být různého typu (<a class="el" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369dd">AttribType</a> (float, vec2, vec3, vec4, ...) a čísla vrcholu <a class="el" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">InVertex::gl_VertexID</a>.<br  />
</p>
<h2><a class="anchor" id="ss_vertexArray"></a>
Tabulka nastavení Vertex Array</h2>
<p>Vertex Assembly jednotka se řídí podle nastavení ze struktury <a class="el" href="structVertexArray.html" title="[VertexAttrib]">VertexArray</a>. </p><div class="image">
<object type="image/svg+xml" data="pullerSettings.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Nastavení pro Vertex Assembly jednotku - VertexArray. Je složena z nastavení pro indexovaní a nastavení pro jednotlivé uživatelem specifikované volitelné atributy. Indexování je složeno z čísla bufferu, typu indexů a offsetu v bajtech. Nastavení attributů je složeno z čísla Bufferu, offsetu v bajtech, kroku v bajtech a typu atributu.</div></div>
<p>Vertex Assembly jednotka je složena z <a class="el" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a> čtecích hlav, které sestavují jednotlivé vertex attributy. <a class="el" href="structInVertex.html">InVertex</a> je složen z <a class="el" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a> atributů, každý odpovídá jedné čtecí hlavě z Vertex Assembly jednotky. Čtecí hlava obsahuje nastavení - offset, stride, type a buffer. Pokud je čtecí hlava povolena (typ není empty), měla by zkopírovat data (o velikosti vertex atributu) z bufferu od daného offsetu, s krokem stride. Všechny velikosti jsou v bajtech. Krok se použije při čtení různých vrcholů: atributy by měly být čteny z adresy: buf_ptr + offset + stride*gl_VertexID <br  />
 Na dalších dvou obrázcích je příklad stavu Vertex Assembly jednotky ve dvou (0. a 1.) invokaci vertex shaderu. </p><div class="image">
<object type="image/svg+xml" data="puller0.svg" style="pointer-events: none;"></object>
<div class="caption">
příklad vertex pulleru při 0. invokací vertex shaderu. Vertex je složen z 3 vertex atributů (coord, normal, position). Čtecí hlavy začínají na daných offsetech a v daných bufferech.</div></div>
 <div class="image">
<object type="image/svg+xml" data="puller1.svg" style="pointer-events: none;"></object>
<div class="caption">
příklad vertex pulleru při 1. invokací vertex shaderu. Čtecí hlavy se posunuly o krok (stride).</div></div>
<h2><a class="anchor" id="vector_part_theory_vs"></a>
Vertex Processor</h2>
<p>Úkolem vertex processoru je pouštět uživatelem specifikovaný vertex shader. Obvykle provádí transformace vrcholů pomocí transformačních matic. Vertex processor vykonává shader (kus programu), kterému se říká vertex shader. Vstupem vertex shaderu je vrchol <a class="el" href="structInVertex.html">InVertex</a>, výstupem je vrchol <a class="el" href="structOutVertex.html">OutVertex</a>. Dalším (konstatním) vstupem vertex shaderu jsou uniformní proměnné a textury <a class="el" href="structShaderInterface.html">ShaderInterface</a>, které jsou uložené v rámci shader programu. Pokud se uživatel rozhodne vykreslit 5 trojúhelníků je vertex shader spuštěn \( 5 \cdot 3 = 15 \). Jednotlivé spuštění (invokace) vertex shaderu vyžadují nové vstupní vrcholy a produkují nové výstupní vrcholy. To ve výsledku znamená, že se pro každou invokaci vertex shaderu spustí Vertex Assembly jednotka, která sestaví vstupní vrchol. </p><div class="image">
<object type="image/svg+xml" data="vertexShader.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Vizualizace vstupů a výstupů vertex procesoru. Ve vertex procesoru běží vertex shader, který obdrží vstupní vrchol, vyprodukuje výstupní vrchol a obdrží vstupní konstanty (uniformní proměnné a textury a číslo vykreslovacího příkazu).</div></div>
<h1><a class="anchor" id="vector_part_task"></a>
Úkol 3: kreslící příkaz - vertexová část GPU</h1>
<p>Cílem této sekce je obsloužit vertexovou část GPU. Do této části spadá: Vertex Array, Vertex Shader, Buffery, Indexy, gl_VertexID, gl_DrawID a čtení z bufferů. Vážou se k tomu tyto testy: </p><div class="fragment"><div class="line">./izgProject -c --test 21 --up-to-test</div>
</div><!-- fragment --><p> Opět editujete funkci <a class="el" href="studentSolution_2src_2studentSolution_2gpu_8cpp.html#acb235bf1bd34504bf58828aac4d40b11">student_GPU_run</a> v souboru <a class="el" href="studentSolution_2src_2studentSolution_2gpu_8cpp.html" title="This file contains implementation of gpu.">studentSolution/src/studentSolution/gpu.cpp</a>.<br  />
</p>
<h2><a class="anchor" id="drawCmdPractice"></a>
Test 14 - spouštění vertex shaderu</h2>
<p>Úkol je zprovoznit spouštění vertex shaderu. K tomtu se váže test:<br  />
 </p><div class="fragment"><div class="line">./izgProject -c --test 14</div>
</div><!-- fragment --><p> Při kreslení musíte zavolat vertex shader tolikrát, kolik je zadáno v kreslícím příkazu (<a class="el" href="structDrawCommand.html">DrawCommand</a>). Kreslící příkaz je struktura: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structDrawCommand.html">DrawCommand</a>{</div>
<div class="line">  uint32_t <a class="code hl_variable" href="structDrawCommand.html#a4a7376486faf9f07fccb7de82d86566b">nofVertices</a>     = 0    ; </div>
<div class="line">};</div>
<div class="ttc" id="astructDrawCommand_html"><div class="ttname"><a href="structDrawCommand.html">DrawCommand</a></div><div class="ttdoc">[ClearStencilCommand]</div><div class="ttdef"><b>Definition</b> gpu.hpp:473</div></div>
<div class="ttc" id="astructDrawCommand_html_a4a7376486faf9f07fccb7de82d86566b"><div class="ttname"><a href="structDrawCommand.html#a4a7376486faf9f07fccb7de82d86566b">DrawCommand::nofVertices</a></div><div class="ttdeci">uint32_t nofVertices</div><div class="ttdoc">number of vertices to draw</div><div class="ttdef"><b>Definition</b> gpu.hpp:474</div></div>
</div><!-- fragment --><p> Struktura obsahuje počet vertexů pro vykreslení. <a class="el" href="structProgram.html" title="[VertexArray]">Program</a>, který by se pro kreslení měl využít se nachází v paměti grafické karty <a class="el" href="structGPUMemory.html">GPUMemory</a>. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>{</div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa73d331b9be494e550928fad4ac6c23d">maxUniforms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a3798310241309de18f5561931d1d2665">maxVertexArrays</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a8fa73be85fde25818e8b63d71fd7dd60">maxTextures</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a0be973077c6d15f40e31d0781b1ea8e6">maxBuffers</a>           = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa8e57983bda33e4ef48e825d5bf261eb">maxPrograms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#ad9cda42fea22fb0d5347a91f101d15d2">maxFramebuffers</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7f32178fb1950dde77a2133bb93bbe5b">defaultFramebuffer</a>   = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structBuffer.html">Buffer</a>          *<a class="code hl_variable" href="structGPUMemory.html#a4755d327262c8020766718bb31f92d0b">buffers</a>              = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structTexture.html">Texture</a>         *<a class="code hl_variable" href="structGPUMemory.html#ac07704dd918f18a48644abdabbdf6f0d">textures</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_union" href="unionUniform.html">Uniform</a>         *<a class="code hl_variable" href="structGPUMemory.html#a21eab797fb058f9cc8ceb26d5993f018">uniforms</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structProgram.html">Program</a>         *<a class="code hl_variable" href="structGPUMemory.html#a50091de928f20fa9d84c6bd137dab3a6">programs</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structFramebuffer.html">Framebuffer</a>     *<a class="code hl_variable" href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">framebuffers</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structVertexArray.html">VertexArray</a>     *<a class="code hl_variable" href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">vertexArrays</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">activatedFramebuffer</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7b289e72424eb0cf9b7aa920386f7565">activatedProgram</a>     = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#af2f8e1efb9217022ced48eeb04b79810">activatedVertexArray</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa6541055bfd7af94a91f35bfe0cd9aad">gl_DrawID</a>            = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structStencilSettings.html">StencilSettings</a>  <a class="code hl_variable" href="structGPUMemory.html#a00d576026cb037973a8cdb85ba6e5498">stencilSettings</a>               ; </div>
<div class="line">  <a class="code hl_struct" href="structBlockWrites.html">BlockWrites</a>      <a class="code hl_variable" href="structGPUMemory.html#ac8733e2ed174d07681ccb20407ac2933">blockWrites</a>                   ; </div>
<div class="line">  <a class="code hl_struct" href="structBackfaceCulling.html">BackfaceCulling</a>  <a class="code hl_variable" href="structGPUMemory.html#a08ac73715dd9138f6dfc6b04b7ec3860">backfaceCulling</a>               ; </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//Do not worry about these.</span></div>
<div class="line">  <span class="comment">//This is just to suppress valgrind warnings because of the large stack.</span></div>
<div class="line">  <span class="comment">//Otherwise everything would be placed on the stack and not on the heap.</span></div>
<div class="line">  <span class="comment">//I had to allocated this structure on the heap, because it is too large.</span></div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>();                 </div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#aba0548cad16f8557782a5b2a409685b0">~GPUMemory</a>();                </div>
<div class="line">  <a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>&amp;<a class="code hl_function" href="structGPUMemory.html#a59c169462c028204dfca9b92f5cd9230">operator=</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">};</div>
<div class="ttc" id="astructBackfaceCulling_html"><div class="ttname"><a href="structBackfaceCulling.html">BackfaceCulling</a></div><div class="ttdoc">[BlockWrites]</div><div class="ttdef"><b>Definition</b> gpu.hpp:390</div></div>
<div class="ttc" id="astructBlockWrites_html"><div class="ttname"><a href="structBlockWrites.html">BlockWrites</a></div><div class="ttdoc">[StencilSettings]</div><div class="ttdef"><b>Definition</b> gpu.hpp:379</div></div>
<div class="ttc" id="astructBuffer_html"><div class="ttname"><a href="structBuffer.html">Buffer</a></div><div class="ttdoc">[Framebuffer]</div><div class="ttdef"><b>Definition</b> gpu.hpp:308</div></div>
<div class="ttc" id="astructFramebuffer_html"><div class="ttname"><a href="structFramebuffer.html">Framebuffer</a></div><div class="ttdoc">This structure represent a framebuffer A framebuffer is used as an output of rendering.</div><div class="ttdef"><b>Definition</b> gpu.hpp:293</div></div>
<div class="ttc" id="astructGPUMemory_html"><div class="ttname"><a href="structGPUMemory.html">GPUMemory</a></div><div class="ttdoc">[BackfaceCulling]</div><div class="ttdef"><b>Definition</b> gpu.hpp:402</div></div>
<div class="ttc" id="astructGPUMemory_html_a00d576026cb037973a8cdb85ba6e5498"><div class="ttname"><a href="structGPUMemory.html#a00d576026cb037973a8cdb85ba6e5498">GPUMemory::stencilSettings</a></div><div class="ttdeci">StencilSettings stencilSettings</div><div class="ttdoc">stencil test settings</div><div class="ttdef"><b>Definition</b> gpu.hpp:420</div></div>
<div class="ttc" id="astructGPUMemory_html_a08ac73715dd9138f6dfc6b04b7ec3860"><div class="ttname"><a href="structGPUMemory.html#a08ac73715dd9138f6dfc6b04b7ec3860">GPUMemory::backfaceCulling</a></div><div class="ttdeci">BackfaceCulling backfaceCulling</div><div class="ttdoc">backface culling</div><div class="ttdef"><b>Definition</b> gpu.hpp:422</div></div>
<div class="ttc" id="astructGPUMemory_html_a0be973077c6d15f40e31d0781b1ea8e6"><div class="ttname"><a href="structGPUMemory.html#a0be973077c6d15f40e31d0781b1ea8e6">GPUMemory::maxBuffers</a></div><div class="ttdeci">uint32_t maxBuffers</div><div class="ttdoc">maximal number of buffers</div><div class="ttdef"><b>Definition</b> gpu.hpp:406</div></div>
<div class="ttc" id="astructGPUMemory_html_a21eab797fb058f9cc8ceb26d5993f018"><div class="ttname"><a href="structGPUMemory.html#a21eab797fb058f9cc8ceb26d5993f018">GPUMemory::uniforms</a></div><div class="ttdeci">Uniform * uniforms</div><div class="ttdoc">array of all uniform variables</div><div class="ttdef"><b>Definition</b> gpu.hpp:412</div></div>
<div class="ttc" id="astructGPUMemory_html_a3798310241309de18f5561931d1d2665"><div class="ttname"><a href="structGPUMemory.html#a3798310241309de18f5561931d1d2665">GPUMemory::maxVertexArrays</a></div><div class="ttdeci">uint32_t maxVertexArrays</div><div class="ttdoc">maximal number of vertex arrays</div><div class="ttdef"><b>Definition</b> gpu.hpp:404</div></div>
<div class="ttc" id="astructGPUMemory_html_a4755d327262c8020766718bb31f92d0b"><div class="ttname"><a href="structGPUMemory.html#a4755d327262c8020766718bb31f92d0b">GPUMemory::buffers</a></div><div class="ttdeci">Buffer * buffers</div><div class="ttdoc">array of all buffers</div><div class="ttdef"><b>Definition</b> gpu.hpp:410</div></div>
<div class="ttc" id="astructGPUMemory_html_a50091de928f20fa9d84c6bd137dab3a6"><div class="ttname"><a href="structGPUMemory.html#a50091de928f20fa9d84c6bd137dab3a6">GPUMemory::programs</a></div><div class="ttdeci">Program * programs</div><div class="ttdoc">array of all programs</div><div class="ttdef"><b>Definition</b> gpu.hpp:413</div></div>
<div class="ttc" id="astructGPUMemory_html_a59c169462c028204dfca9b92f5cd9230"><div class="ttname"><a href="structGPUMemory.html#a59c169462c028204dfca9b92f5cd9230">GPUMemory::operator=</a></div><div class="ttdeci">GPUMemory &amp; operator=(GPUMemory const &amp;o)</div><div class="ttdoc">Assign operator.</div><div class="ttdef"><b>Definition</b> gpu.cpp:54</div></div>
<div class="ttc" id="astructGPUMemory_html_a7b289e72424eb0cf9b7aa920386f7565"><div class="ttname"><a href="structGPUMemory.html#a7b289e72424eb0cf9b7aa920386f7565">GPUMemory::activatedProgram</a></div><div class="ttdeci">uint32_t activatedProgram</div><div class="ttdoc">id of activated program</div><div class="ttdef"><b>Definition</b> gpu.hpp:417</div></div>
<div class="ttc" id="astructGPUMemory_html_a7f32178fb1950dde77a2133bb93bbe5b"><div class="ttname"><a href="structGPUMemory.html#a7f32178fb1950dde77a2133bb93bbe5b">GPUMemory::defaultFramebuffer</a></div><div class="ttdeci">uint32_t defaultFramebuffer</div><div class="ttdoc">id of default framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:409</div></div>
<div class="ttc" id="astructGPUMemory_html_a8fa73be85fde25818e8b63d71fd7dd60"><div class="ttname"><a href="structGPUMemory.html#a8fa73be85fde25818e8b63d71fd7dd60">GPUMemory::maxTextures</a></div><div class="ttdeci">uint32_t maxTextures</div><div class="ttdoc">maximal number of textures</div><div class="ttdef"><b>Definition</b> gpu.hpp:405</div></div>
<div class="ttc" id="astructGPUMemory_html_a9b333f6f69347068f349d05961c7bf39"><div class="ttname"><a href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory::GPUMemory</a></div><div class="ttdeci">GPUMemory()</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition</b> gpu.cpp:16</div></div>
<div class="ttc" id="astructGPUMemory_html_aa6541055bfd7af94a91f35bfe0cd9aad"><div class="ttname"><a href="structGPUMemory.html#aa6541055bfd7af94a91f35bfe0cd9aad">GPUMemory::gl_DrawID</a></div><div class="ttdeci">uint32_t gl_DrawID</div><div class="ttdoc">draw call id</div><div class="ttdef"><b>Definition</b> gpu.hpp:419</div></div>
<div class="ttc" id="astructGPUMemory_html_aa73d331b9be494e550928fad4ac6c23d"><div class="ttname"><a href="structGPUMemory.html#aa73d331b9be494e550928fad4ac6c23d">GPUMemory::maxUniforms</a></div><div class="ttdeci">uint32_t maxUniforms</div><div class="ttdoc">maximal number of uniforms</div><div class="ttdef"><b>Definition</b> gpu.hpp:403</div></div>
<div class="ttc" id="astructGPUMemory_html_aa8e57983bda33e4ef48e825d5bf261eb"><div class="ttname"><a href="structGPUMemory.html#aa8e57983bda33e4ef48e825d5bf261eb">GPUMemory::maxPrograms</a></div><div class="ttdeci">uint32_t maxPrograms</div><div class="ttdoc">maximal number of programs</div><div class="ttdef"><b>Definition</b> gpu.hpp:407</div></div>
<div class="ttc" id="astructGPUMemory_html_aba0548cad16f8557782a5b2a409685b0"><div class="ttname"><a href="structGPUMemory.html#aba0548cad16f8557782a5b2a409685b0">GPUMemory::~GPUMemory</a></div><div class="ttdeci">~GPUMemory()</div><div class="ttdoc">Destructor.</div><div class="ttdef"><b>Definition</b> gpu.cpp:62</div></div>
<div class="ttc" id="astructGPUMemory_html_abd0d80589104a936db46ae766bc7975e"><div class="ttname"><a href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">GPUMemory::framebuffers</a></div><div class="ttdeci">Framebuffer * framebuffers</div><div class="ttdoc">framebuffer - output of rendering, 0 is default framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:414</div></div>
<div class="ttc" id="astructGPUMemory_html_ac07704dd918f18a48644abdabbdf6f0d"><div class="ttname"><a href="structGPUMemory.html#ac07704dd918f18a48644abdabbdf6f0d">GPUMemory::textures</a></div><div class="ttdeci">Texture * textures</div><div class="ttdoc">array of all textures</div><div class="ttdef"><b>Definition</b> gpu.hpp:411</div></div>
<div class="ttc" id="astructGPUMemory_html_ac8733e2ed174d07681ccb20407ac2933"><div class="ttname"><a href="structGPUMemory.html#ac8733e2ed174d07681ccb20407ac2933">GPUMemory::blockWrites</a></div><div class="ttdeci">BlockWrites blockWrites</div><div class="ttdoc">block writes to buffers of framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:421</div></div>
<div class="ttc" id="astructGPUMemory_html_acab4bb492d24e78131d39ea7997266cb"><div class="ttname"><a href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">GPUMemory::vertexArrays</a></div><div class="ttdeci">VertexArray * vertexArrays</div><div class="ttdoc">array of all vertex arrays</div><div class="ttdef"><b>Definition</b> gpu.hpp:415</div></div>
<div class="ttc" id="astructGPUMemory_html_acd06344c1c43bef8df606d6664fee4b4"><div class="ttname"><a href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">GPUMemory::activatedFramebuffer</a></div><div class="ttdeci">uint32_t activatedFramebuffer</div><div class="ttdoc">id of activated framebuffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:416</div></div>
<div class="ttc" id="astructGPUMemory_html_ad9cda42fea22fb0d5347a91f101d15d2"><div class="ttname"><a href="structGPUMemory.html#ad9cda42fea22fb0d5347a91f101d15d2">GPUMemory::maxFramebuffers</a></div><div class="ttdeci">uint32_t maxFramebuffers</div><div class="ttdoc">maximal number of framebuffers</div><div class="ttdef"><b>Definition</b> gpu.hpp:408</div></div>
<div class="ttc" id="astructGPUMemory_html_af2f8e1efb9217022ced48eeb04b79810"><div class="ttname"><a href="structGPUMemory.html#af2f8e1efb9217022ced48eeb04b79810">GPUMemory::activatedVertexArray</a></div><div class="ttdeci">uint32_t activatedVertexArray</div><div class="ttdoc">id of activated vertex array</div><div class="ttdef"><b>Definition</b> gpu.hpp:418</div></div>
<div class="ttc" id="astructProgram_html"><div class="ttname"><a href="structProgram.html">Program</a></div><div class="ttdoc">[VertexArray]</div><div class="ttdef"><b>Definition</b> gpu.hpp:250</div></div>
<div class="ttc" id="astructStencilSettings_html"><div class="ttname"><a href="structStencilSettings.html">StencilSettings</a></div><div class="ttdoc">[StencilOps]</div><div class="ttdef"><b>Definition</b> gpu.hpp:366</div></div>
<div class="ttc" id="astructTexture_html"><div class="ttname"><a href="structTexture.html">Texture</a></div><div class="ttdoc">[Image]</div><div class="ttdef"><b>Definition</b> gpu.hpp:60</div></div>
<div class="ttc" id="astructVertexArray_html"><div class="ttname"><a href="structVertexArray.html">VertexArray</a></div><div class="ttdoc">[VertexAttrib]</div><div class="ttdef"><b>Definition</b> gpu.hpp:236</div></div>
<div class="ttc" id="aunionUniform_html"><div class="ttname"><a href="unionUniform.html">Uniform</a></div><div class="ttdoc">[OutFragment]</div><div class="ttdef"><b>Definition</b> gpu.hpp:146</div></div>
</div><!-- fragment --><p> Správný program je vybrán pomocí čísla aktivního programu <a class="el" href="structGPUMemory.html#a7b289e72424eb0cf9b7aa920386f7565">GPUMemory::activatedProgram</a>. <a class="el" href="structProgram.html" title="[VertexArray]">Program</a> je opět struktura: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structProgram.html">Program</a>{</div>
<div class="line">  <a class="code hl_typedef" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a61e7df3fcaa53829be20be29b197e3e6">VertexShader</a>   <a class="code hl_variable" href="structProgram.html#a2bcea678985527f04a87be358ff1f78b">vertexShader</a>   = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_typedef" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#ac2dd95ee5e44978647da13fc95b9420e">FragmentShader</a> <a class="code hl_variable" href="structProgram.html#a5faf623d0af27d6000ebcacafecf2eb5">fragmentShader</a> = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369dd">AttribType</a>  <a class="code hl_variable" href="structProgram.html#ac9033c6597b5c092dc2393965ce57b0c">vs2fs</a>[<a class="code hl_variable" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a>] = {<a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369ddaba2b45bdc11e2a4a6e86aab2ac693cbb">AttribType::EMPTY</a>}; </div>
<div class="line">};</div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a61e7df3fcaa53829be20be29b197e3e6"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a61e7df3fcaa53829be20be29b197e3e6">VertexShader</a></div><div class="ttdeci">void(*)(OutVertex &amp;outVertex, InVertex const  &amp;inVertex, ShaderInterface const  &amp;si) VertexShader</div><div class="ttdoc">[ShaderInterface]</div><div class="ttdef"><b>Definition</b> gpu.hpp:202</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a8938ad0ed0735df8ab181ffadae5f489"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a></div><div class="ttdeci">uint32_t const maxAttribs</div><div class="ttdoc">maximum number of vertex/fragment attributes</div><div class="ttdef"><b>Definition</b> gpu.hpp:15</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a8cc36b907e294f5e78e1b479cac369dd"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369dd">AttribType</a></div><div class="ttdeci">AttribType</div><div class="ttdoc">[Texture]</div><div class="ttdef"><b>Definition</b> gpu.hpp:72</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a8cc36b907e294f5e78e1b479cac369ddaba2b45bdc11e2a4a6e86aab2ac693cbb"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369ddaba2b45bdc11e2a4a6e86aab2ac693cbb">AttribType::EMPTY</a></div><div class="ttdeci">@ EMPTY</div><div class="ttdoc">disabled attribute</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_ac2dd95ee5e44978647da13fc95b9420e"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#ac2dd95ee5e44978647da13fc95b9420e">FragmentShader</a></div><div class="ttdeci">void(*)(OutFragment &amp;outFragment, InFragment const  &amp;inFragment, ShaderInterface const  &amp;si) FragmentShader</div><div class="ttdoc">[VertexShader]</div><div class="ttdef"><b>Definition</b> gpu.hpp:216</div></div>
<div class="ttc" id="astructProgram_html_a2bcea678985527f04a87be358ff1f78b"><div class="ttname"><a href="structProgram.html#a2bcea678985527f04a87be358ff1f78b">Program::vertexShader</a></div><div class="ttdeci">VertexShader vertexShader</div><div class="ttdoc">vertex shader</div><div class="ttdef"><b>Definition</b> gpu.hpp:251</div></div>
<div class="ttc" id="astructProgram_html_a5faf623d0af27d6000ebcacafecf2eb5"><div class="ttname"><a href="structProgram.html#a5faf623d0af27d6000ebcacafecf2eb5">Program::fragmentShader</a></div><div class="ttdeci">FragmentShader fragmentShader</div><div class="ttdoc">fragment shader</div><div class="ttdef"><b>Definition</b> gpu.hpp:252</div></div>
<div class="ttc" id="astructProgram_html_ac9033c6597b5c092dc2393965ce57b0c"><div class="ttname"><a href="structProgram.html#ac9033c6597b5c092dc2393965ce57b0c">Program::vs2fs</a></div><div class="ttdeci">AttribType vs2fs[maxAttribs]</div><div class="ttdoc">which attributes are interpolated from vertex shader to fragment shader</div><div class="ttdef"><b>Definition</b> gpu.hpp:253</div></div>
</div><!-- fragment --><p> Struktura programu obsahuje vertex shader. Vertex shader je v ukazatel na funkci. Na normálním GPU se jedná o program (třeba v GLSL), který se kompiluje. V tomto projektu je to C/C++ funkce, která je uložena v ukazateli na funkci. Vertex shader bere 3 parametry </p><div class="fragment"><div class="line"><span class="keyword">using </span><a class="code hl_typedef" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a61e7df3fcaa53829be20be29b197e3e6">VertexShader</a> = void(*)(</div>
<div class="line">    <a class="code hl_struct" href="structOutVertex.html">OutVertex</a>            &amp;outVertex,</div>
<div class="line">    <a class="code hl_struct" href="structInVertex.html">InVertex</a>        <span class="keyword">const</span>&amp;inVertex ,</div>
<div class="line">    <a class="code hl_struct" href="structShaderInterface.html">ShaderInterface</a> <span class="keyword">const</span>&amp;si       );</div>
<div class="ttc" id="astructInVertex_html"><div class="ttname"><a href="structInVertex.html">InVertex</a></div><div class="ttdoc">[Attrib]</div><div class="ttdef"><b>Definition</b> gpu.hpp:106</div></div>
<div class="ttc" id="astructOutVertex_html"><div class="ttname"><a href="structOutVertex.html">OutVertex</a></div><div class="ttdoc">[InVertex]</div><div class="ttdef"><b>Definition</b> gpu.hpp:116</div></div>
<div class="ttc" id="astructShaderInterface_html"><div class="ttname"><a href="structShaderInterface.html">ShaderInterface</a></div><div class="ttdoc">[IndexType]</div><div class="ttdef"><b>Definition</b> gpu.hpp:184</div></div>
</div><!-- fragment --><p>V tomto testu byste měli správně nastavit <a class="el" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000" title="vertex id">InVertex::gl_VertexID</a>. Obdobně jako číslování kreslících příkazů, existuje i číslování vrcholů. Zatím bude stačit pořadové číslo vrcholu. Vstupní vrchol se nachází ve struktuře <a class="el" href="structInVertex.html" title="[Attrib]">InVertex</a> </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structInVertex.html">InVertex</a>{</div>
<div class="line">  <a class="code hl_union" href="unionAttrib.html">Attrib</a>   <a class="code hl_variable" href="structInVertex.html#a90ec7fd87b6a7f776638cd5aa23f2ecb">attributes</a>[<a class="code hl_variable" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a>]    ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">gl_VertexID</a>            = 0; </div>
<div class="line">};</div>
<div class="ttc" id="astructInVertex_html_a90ec7fd87b6a7f776638cd5aa23f2ecb"><div class="ttname"><a href="structInVertex.html#a90ec7fd87b6a7f776638cd5aa23f2ecb">InVertex::attributes</a></div><div class="ttdeci">Attrib attributes[maxAttribs]</div><div class="ttdoc">vertex attributes</div><div class="ttdef"><b>Definition</b> gpu.hpp:107</div></div>
<div class="ttc" id="astructInVertex_html_aa4d31911053492bffe4b41dae12ee000"><div class="ttname"><a href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">InVertex::gl_VertexID</a></div><div class="ttdeci">uint32_t gl_VertexID</div><div class="ttdoc">vertex id</div><div class="ttdef"><b>Definition</b> gpu.hpp:108</div></div>
<div class="ttc" id="aunionAttrib_html"><div class="ttname"><a href="unionAttrib.html">Attrib</a></div><div class="ttdoc">[AttribType]</div><div class="ttdef"><b>Definition</b> gpu.hpp:89</div></div>
</div><!-- fragment --><h2><a class="anchor" id="ShaderInterFace_gl_DrawID"></a>
Test 15 - test číslování vykreslovacích příkazů</h2>
<p>Úkol je zprovoznit proměnnou <a class="el" href="structShaderInterface.html#acdb2c4b2df7bd9535ddde723b86eabc7">ShaderInterface::gl_DrawID</a>. Vertex shader obdrží mimo vstupního vertexu ještě <a class="el" href="structShaderInterface.html">ShaderInterface</a>. <a class="el" href="structShaderInterface.html">ShaderInterface</a> obsahuje konstanty. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structShaderInterface.html">ShaderInterface</a>{</div>
<div class="line">  <a class="code hl_union" href="unionUniform.html">Uniform</a> <span class="keyword">const</span>*<a class="code hl_variable" href="structShaderInterface.html#a03009720e763e8efe2bfa4d4607dcc10">uniforms</a>  = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structTexture.html">Texture</a> <span class="keyword">const</span>*<a class="code hl_variable" href="structShaderInterface.html#ad33e6e9e4ff2fbf3853b4430f05188cb">textures</a>  = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint32_t      <a class="code hl_variable" href="structShaderInterface.html#acdb2c4b2df7bd9535ddde723b86eabc7">gl_DrawID</a> = 0      ; </div>
<div class="line">};</div>
<div class="ttc" id="astructShaderInterface_html_a03009720e763e8efe2bfa4d4607dcc10"><div class="ttname"><a href="structShaderInterface.html#a03009720e763e8efe2bfa4d4607dcc10">ShaderInterface::uniforms</a></div><div class="ttdeci">Uniform const  * uniforms</div><div class="ttdoc">uniform variables</div><div class="ttdef"><b>Definition</b> gpu.hpp:185</div></div>
<div class="ttc" id="astructShaderInterface_html_acdb2c4b2df7bd9535ddde723b86eabc7"><div class="ttname"><a href="structShaderInterface.html#acdb2c4b2df7bd9535ddde723b86eabc7">ShaderInterface::gl_DrawID</a></div><div class="ttdeci">uint32_t gl_DrawID</div><div class="ttdoc">draw id</div><div class="ttdef"><b>Definition</b> gpu.hpp:187</div></div>
<div class="ttc" id="astructShaderInterface_html_ad33e6e9e4ff2fbf3853b4430f05188cb"><div class="ttname"><a href="structShaderInterface.html#ad33e6e9e4ff2fbf3853b4430f05188cb">ShaderInterface::textures</a></div><div class="ttdeci">Texture const  * textures</div><div class="ttdoc">textures</div><div class="ttdef"><b>Definition</b> gpu.hpp:186</div></div>
</div><!-- fragment --><p> K tomtu se váže test:<br  />
 </p><div class="fragment"><div class="line">./izgProject -c --test 15</div>
</div><!-- fragment --><p> Vertex shader by měl vědět, v rámci jakého vykreslovacího příkazu byl puštěn.</p>
<h2><a class="anchor" id="ss_mixed_clear_draw"></a>
Test 16 - test proloženého kreslení a čistění</h2>
<p>Tento test zkouší do <a class="el" href="structCommandBuffer.html">CommandBuffer(u)</a> uložit prokládané příkazy kreslení a čistění. K tomtu se váže test:<br  />
 </p><div class="fragment"><div class="line">./izgProject -c --test 16</div>
</div><!-- fragment --><h2><a class="anchor" id="ss_shaderInterface"></a>
Test 17 - ověření ShaderInterface</h2>
<p>Tento test zkouší, zda vertex shader obdržel správnou strukturu <a class="el" href="structShaderInterface.html">ShaderInterface</a>. K tomtu se váže test:<br  />
 </p><div class="fragment"><div class="line">./izgProject -c --test 17</div>
</div><!-- fragment --><p> <a class="el" href="structShaderInterface.html" title="[IndexType]">ShaderInterface</a> jsou konstantní vstupy do shaderu a vypadá následovně: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structShaderInterface.html">ShaderInterface</a>{</div>
<div class="line">  <a class="code hl_union" href="unionUniform.html">Uniform</a> <span class="keyword">const</span>*<a class="code hl_variable" href="structShaderInterface.html#a03009720e763e8efe2bfa4d4607dcc10">uniforms</a>  = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structTexture.html">Texture</a> <span class="keyword">const</span>*<a class="code hl_variable" href="structShaderInterface.html#ad33e6e9e4ff2fbf3853b4430f05188cb">textures</a>  = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint32_t      <a class="code hl_variable" href="structShaderInterface.html#acdb2c4b2df7bd9535ddde723b86eabc7">gl_DrawID</a> = 0      ; </div>
<div class="line">};</div>
</div><!-- fragment --><p> Ukazatele <a class="el" href="structShaderInterface.html#a03009720e763e8efe2bfa4d4607dcc10">ShaderInterface::uniforms</a> a <a class="el" href="structShaderInterface.html#ad33e6e9e4ff2fbf3853b4430f05188cb">ShaderInterface::textures</a> by měly obsahovat stejné ukazatele, které jsou uvedeny v paměti grafické karty <a class="el" href="structGPUMemory.html#a21eab797fb058f9cc8ceb26d5993f018">GPUMemory::uniforms</a>, <a class="el" href="structGPUMemory.html#ac07704dd918f18a48644abdabbdf6f0d">GPUMemory::textures</a>.</p>
<h2><a class="anchor" id="gl_VertexIDIndex32"></a>
Test 18 - číslování vrcholů s indexováním.</h2>
<p>Tento test zkouší využít indexační buffer pro číslování vrcholů <a class="el" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">InVertex::gl_VertexID</a> </p><div class="fragment"><div class="line">./izgProject -c --test 18</div>
</div><!-- fragment --><p> Musíte správně číslovat vstupní vrcholy, když je zapnuté indexování.<br  />
</p>
<p>Indexování může být zapnuto nebo vypnuto - o tom rozhoduje nastavení ve struktuře <a class="el" href="structVertexArray.html">VertexArray</a> V paměti grafické karty je pole vertex array objektů <a class="el" href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">GPUMemory::vertexArrays</a>. Každý vertex array je tabulka nastavení takzvané vertex assembly jednotky (jednotka sestavující vrcholy). Struktura <a class="el" href="structVertexArray.html" title="[VertexAttrib]">VertexArray</a> vypadá následnovně: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structVertexArray.html">VertexArray</a>{</div>
<div class="line">  <a class="code hl_struct" href="structVertexAttrib.html">VertexAttrib</a> <a class="code hl_variable" href="structVertexArray.html#a97057a034a7eb5dcd2bd38fad989687c">vertexAttrib</a>[<a class="code hl_variable" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a>];    </div>
<div class="line">  int32_t      <a class="code hl_variable" href="structVertexArray.html#a7648ec169177dbb70b495b51ffcfb606">indexBufferID</a> = -1;             </div>
<div class="line">  uint64_t     <a class="code hl_variable" href="structVertexArray.html#a89b9faa058891874f5bf63064deafe99">indexOffset</a>   = 0 ;             </div>
<div class="line">  <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3e">IndexType</a>    <a class="code hl_variable" href="structVertexArray.html#a7822420a93f7334ffdb1a0992de59ae3">indexType</a>     = <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eac8bd5bedff8ef192d39a962afc0e19ee">IndexType::U32</a>; </div>
<div class="line">};</div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a862161defe984b09e24dfec9e0540a3e"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3e">IndexType</a></div><div class="ttdeci">IndexType</div><div class="ttdoc">[Uniform]</div><div class="ttdef"><b>Definition</b> gpu.hpp:168</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a862161defe984b09e24dfec9e0540a3eac8bd5bedff8ef192d39a962afc0e19ee"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eac8bd5bedff8ef192d39a962afc0e19ee">IndexType::U32</a></div><div class="ttdeci">@ U32</div><div class="ttdoc">uint32_t type</div></div>
<div class="ttc" id="astructVertexArray_html_a7648ec169177dbb70b495b51ffcfb606"><div class="ttname"><a href="structVertexArray.html#a7648ec169177dbb70b495b51ffcfb606">VertexArray::indexBufferID</a></div><div class="ttdeci">int32_t indexBufferID</div><div class="ttdoc">id of index buffer</div><div class="ttdef"><b>Definition</b> gpu.hpp:238</div></div>
<div class="ttc" id="astructVertexArray_html_a7822420a93f7334ffdb1a0992de59ae3"><div class="ttname"><a href="structVertexArray.html#a7822420a93f7334ffdb1a0992de59ae3">VertexArray::indexType</a></div><div class="ttdeci">IndexType indexType</div><div class="ttdoc">type of indices</div><div class="ttdef"><b>Definition</b> gpu.hpp:240</div></div>
<div class="ttc" id="astructVertexArray_html_a89b9faa058891874f5bf63064deafe99"><div class="ttname"><a href="structVertexArray.html#a89b9faa058891874f5bf63064deafe99">VertexArray::indexOffset</a></div><div class="ttdeci">uint64_t indexOffset</div><div class="ttdoc">offset of indices</div><div class="ttdef"><b>Definition</b> gpu.hpp:239</div></div>
<div class="ttc" id="astructVertexArray_html_a97057a034a7eb5dcd2bd38fad989687c"><div class="ttname"><a href="structVertexArray.html#a97057a034a7eb5dcd2bd38fad989687c">VertexArray::vertexAttrib</a></div><div class="ttdeci">VertexAttrib vertexAttrib[maxAttribs]</div><div class="ttdoc">settings for vertex attributes</div><div class="ttdef"><b>Definition</b> gpu.hpp:237</div></div>
<div class="ttc" id="astructVertexAttrib_html"><div class="ttname"><a href="structVertexAttrib.html">VertexAttrib</a></div><div class="ttdoc">[FragmentShader]</div><div class="ttdef"><b>Definition</b> gpu.hpp:223</div></div>
</div><!-- fragment --><p> V této struktuře jsou pro indexovaní podstatné položky <a class="el" href="structVertexArray.html#a7648ec169177dbb70b495b51ffcfb606">VertexArray::indexBufferID</a>, <a class="el" href="structVertexArray.html#a89b9faa058891874f5bf63064deafe99">VertexArray::indexOffset</a> a <a class="el" href="structVertexArray.html#a7822420a93f7334ffdb1a0992de59ae3">VertexArray::indexType</a>. indexBufferID je číslo bufferu nebo -1 pokud je indexing vypnutý. indexOffset je posun v bajtech od začátku bufferu, kde se nacházejí indexy. indexType je typ indexu.<br  />
 Všechny buffery (stejně jako programy) se nachází v paměti grafické karty (<a class="el" href="structGPUMemory.html">GPUMemory</a>). </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>{</div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa73d331b9be494e550928fad4ac6c23d">maxUniforms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a3798310241309de18f5561931d1d2665">maxVertexArrays</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a8fa73be85fde25818e8b63d71fd7dd60">maxTextures</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a0be973077c6d15f40e31d0781b1ea8e6">maxBuffers</a>           = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa8e57983bda33e4ef48e825d5bf261eb">maxPrograms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#ad9cda42fea22fb0d5347a91f101d15d2">maxFramebuffers</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7f32178fb1950dde77a2133bb93bbe5b">defaultFramebuffer</a>   = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structBuffer.html">Buffer</a>          *<a class="code hl_variable" href="structGPUMemory.html#a4755d327262c8020766718bb31f92d0b">buffers</a>              = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structTexture.html">Texture</a>         *<a class="code hl_variable" href="structGPUMemory.html#ac07704dd918f18a48644abdabbdf6f0d">textures</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_union" href="unionUniform.html">Uniform</a>         *<a class="code hl_variable" href="structGPUMemory.html#a21eab797fb058f9cc8ceb26d5993f018">uniforms</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structProgram.html">Program</a>         *<a class="code hl_variable" href="structGPUMemory.html#a50091de928f20fa9d84c6bd137dab3a6">programs</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structFramebuffer.html">Framebuffer</a>     *<a class="code hl_variable" href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">framebuffers</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structVertexArray.html">VertexArray</a>     *<a class="code hl_variable" href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">vertexArrays</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">activatedFramebuffer</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7b289e72424eb0cf9b7aa920386f7565">activatedProgram</a>     = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#af2f8e1efb9217022ced48eeb04b79810">activatedVertexArray</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa6541055bfd7af94a91f35bfe0cd9aad">gl_DrawID</a>            = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structStencilSettings.html">StencilSettings</a>  <a class="code hl_variable" href="structGPUMemory.html#a00d576026cb037973a8cdb85ba6e5498">stencilSettings</a>               ; </div>
<div class="line">  <a class="code hl_struct" href="structBlockWrites.html">BlockWrites</a>      <a class="code hl_variable" href="structGPUMemory.html#ac8733e2ed174d07681ccb20407ac2933">blockWrites</a>                   ; </div>
<div class="line">  <a class="code hl_struct" href="structBackfaceCulling.html">BackfaceCulling</a>  <a class="code hl_variable" href="structGPUMemory.html#a08ac73715dd9138f6dfc6b04b7ec3860">backfaceCulling</a>               ; </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//Do not worry about these.</span></div>
<div class="line">  <span class="comment">//This is just to suppress valgrind warnings because of the large stack.</span></div>
<div class="line">  <span class="comment">//Otherwise everything would be placed on the stack and not on the heap.</span></div>
<div class="line">  <span class="comment">//I had to allocated this structure on the heap, because it is too large.</span></div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>();                 </div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#aba0548cad16f8557782a5b2a409685b0">~GPUMemory</a>();                </div>
<div class="line">  <a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>&amp;<a class="code hl_function" href="structGPUMemory.html#a59c169462c028204dfca9b92f5cd9230">operator=</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">};</div>
</div><!-- fragment --><p> <a class="el" href="structBuffer.html" title="[Framebuffer]">Buffer</a> je lineární paměť, reprezentovano strukturou: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a>{</div>
<div class="line">  <span class="keywordtype">void</span> <span class="keyword">const</span>* <a class="code hl_variable" href="structBuffer.html#a8fbe8b3fba53c8ff7fcd44f9c4f463c7">data</a> = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint64_t    <a class="code hl_variable" href="structBuffer.html#a3d37b3ab0942c1222347f8de7520f9ef">size</a> = 0      ; </div>
<div class="line">};</div>
<div class="ttc" id="astructBuffer_html_a3d37b3ab0942c1222347f8de7520f9ef"><div class="ttname"><a href="structBuffer.html#a3d37b3ab0942c1222347f8de7520f9ef">Buffer::size</a></div><div class="ttdeci">uint64_t size</div><div class="ttdoc">size of data in bytes</div><div class="ttdef"><b>Definition</b> gpu.hpp:310</div></div>
<div class="ttc" id="astructBuffer_html_a8fbe8b3fba53c8ff7fcd44f9c4f463c7"><div class="ttname"><a href="structBuffer.html#a8fbe8b3fba53c8ff7fcd44f9c4f463c7">Buffer::data</a></div><div class="ttdeci">void const  * data</div><div class="ttdoc">pointer to data</div><div class="ttdef"><b>Definition</b> gpu.hpp:309</div></div>
</div><!-- fragment --><p>Indexační buffer může mít růzou velikost indexu - 8bit, 16bit a 32bit: </p><div class="fragment"><div class="line"><span class="keyword">enum class</span> <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3e">IndexType</a> : uint8_t{</div>
<div class="line">  <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3ea6669348b484e3008dca2bfa8e85e40b5">U8</a>  = 1, </div>
<div class="line">  <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eaef9ef3ebca4d2b64b6ec83808bafa5f2">U16</a> = 2, </div>
<div class="line">  <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eac8bd5bedff8ef192d39a962afc0e19ee">U32</a> = 4, </div>
<div class="line">};</div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a862161defe984b09e24dfec9e0540a3ea6669348b484e3008dca2bfa8e85e40b5"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3ea6669348b484e3008dca2bfa8e85e40b5">IndexType::U8</a></div><div class="ttdeci">@ U8</div><div class="ttdoc">uin8_t type</div></div>
<div class="ttc" id="asolutionInterface_2src_2solutionInterface_2gpu_8hpp_html_a862161defe984b09e24dfec9e0540a3eaef9ef3ebca4d2b64b6ec83808bafa5f2"><div class="ttname"><a href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eaef9ef3ebca4d2b64b6ec83808bafa5f2">IndexType::U16</a></div><div class="ttdeci">@ U16</div><div class="ttdoc">uin16_t type</div></div>
</div><!-- fragment --><p> Pokud je zapnuto indexování, pak je číslo vrcholu dáno položkou v indexačním bufferu, kde je položka (index) v bufferu vybrána na základě čísla invokace vertex shaderu. Pseudokód: </p><div class="fragment"><div class="line">uint32_t getIndex(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;mem,uint32_t i){</div>
<div class="line">  <span class="comment">// aktivovaná tabulka nastavení pro vertex assembly jednotu</span></div>
<div class="line">  <span class="keyword">auto</span> vao = mem.<a class="code hl_variable" href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">vertexArrays</a>[mem.<a class="code hl_variable" href="structGPUMemory.html#af2f8e1efb9217022ced48eeb04b79810">activatedVertexArray</a>];</div>
<div class="line">  <span class="keywordflow">if</span>(vao.indexBufferID &gt;= 0){ <span class="comment">// je použito indexování?</span></div>
<div class="line">    <a class="code hl_struct" href="structBuffer.html">Buffer</a> indexBuffer = mem.<a class="code hl_variable" href="structGPUMemory.html#a4755d327262c8020766718bb31f92d0b">buffers</a>[vao.indexBufferID]; <span class="comment">//indexový buffer</span></div>
<div class="line">    <span class="keywordflow">if</span>(vao.indexType == <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3ea6669348b484e3008dca2bfa8e85e40b5">IndexType::U8</a>){ <span class="comment">// je typ indexu uint8_t</span></div>
<div class="line">      uint8_t*ptr = (uint8_t*)indexBuffer.<a class="code hl_variable" href="structBuffer.html#a8fbe8b3fba53c8ff7fcd44f9c4f463c7">data</a>; <span class="comment">//ukazatel na data</span></div>
<div class="line">      ptr += vao.indexOffset; <span class="comment">// posun ukazatele o offset v bajtech</span></div>
<div class="line">      <span class="keywordflow">return</span> ...</div>
<div class="line">    }</div>
<div class="line">  }<span class="keywordflow">else</span></div>
<div class="line">    <span class="comment">// ....</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="VertexPuller_Att"></a>
Testy 19-21 - Vertex Atributy, Vertex Assembly jednotka</h2>
<p>Tyto testy ověřují, zda vám správně jednotka Vertex Assembly sestavuje vrcholy z paměti: </p><div class="fragment"><div class="line">./izgProject -c --test 19</div>
<div class="line">./izgProject -c --test 20</div>
<div class="line">./izgProject -c --test 21</div>
</div><!-- fragment --><p> V tomto testu musíte naprogramovat funkcionalitu Vertex Assembly jednotky.</p>
<div class="image">
<object type="image/svg+xml" data="vertexAssemblyTask.svg" width="800" style="pointer-events: none;"></object>
<div class="caption">
Vertex Assembly jednotka sestavuje vrcholy z paměti (většinou). K tomu potřebuje tabulku nastavení (VertexArray) a číslo vrcholu.</div></div>
<p>Vertex Assembly jednotka sestavuje vstupní vrcholy (<a class="el" href="structInVertex.html">InVertex</a>) z paměti (<a class="el" href="structGPUMemory.html">GPUMemory</a>) pomocí nastavení z tabulky <a class="el" href="structVertexArray.html">VertexArray</a>.</p>
<h3><a class="anchor" id="sss_vertexAssembly_inputs"></a>
Vstupy:</h3>
<p>Nastavení je uloženo ve struktuře <a class="el" href="structVertexArray.html">VertexArray</a> </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structVertexArray.html">VertexArray</a>{</div>
<div class="line">  <a class="code hl_struct" href="structVertexAttrib.html">VertexAttrib</a> <a class="code hl_variable" href="structVertexArray.html#a97057a034a7eb5dcd2bd38fad989687c">vertexAttrib</a>[<a class="code hl_variable" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a>];    </div>
<div class="line">  int32_t      <a class="code hl_variable" href="structVertexArray.html#a7648ec169177dbb70b495b51ffcfb606">indexBufferID</a> = -1;             </div>
<div class="line">  uint64_t     <a class="code hl_variable" href="structVertexArray.html#a89b9faa058891874f5bf63064deafe99">indexOffset</a>   = 0 ;             </div>
<div class="line">  <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3e">IndexType</a>    <a class="code hl_variable" href="structVertexArray.html#a7822420a93f7334ffdb1a0992de59ae3">indexType</a>     = <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a862161defe984b09e24dfec9e0540a3eac8bd5bedff8ef192d39a962afc0e19ee">IndexType::U32</a>; </div>
<div class="line">};</div>
</div><!-- fragment --><p> Je složeno z nastavení pro indexování a nastavení pro vertex attributy. <br  />
 <a class="el" href="structVertexAttrib.html" title="[FragmentShader]">VertexAttrib</a> je struktura obsahují nastavení, jak číst jeden Vertex Attribut. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structVertexAttrib.html">VertexAttrib</a>{</div>
<div class="line">  int32_t       <a class="code hl_variable" href="structVertexAttrib.html#a4578d3605e0f61b7bfd1f5e24df7c9bf">bufferID</a> = -1               ;</div>
<div class="line">  uint64_t      <a class="code hl_variable" href="structVertexAttrib.html#aef250d71bce43e96a6efb9180f24d079">stride</a>   = 0                ;</div>
<div class="line">  uint64_t      <a class="code hl_variable" href="structVertexAttrib.html#a58f3129f893d0ce72ec7d364fef21840">offset</a>   = 0                ;</div>
<div class="line">  <a class="code hl_enumeration" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369dd">AttribType</a>    <a class="code hl_variable" href="structVertexAttrib.html#a407a6d51ebdbc42b00d0c811b95d8e9d">type</a>     = <a class="code hl_enumvalue" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8cc36b907e294f5e78e1b479cac369ddaba2b45bdc11e2a4a6e86aab2ac693cbb">AttribType::EMPTY</a>;</div>
<div class="line">};</div>
<div class="ttc" id="astructVertexAttrib_html_a407a6d51ebdbc42b00d0c811b95d8e9d"><div class="ttname"><a href="structVertexAttrib.html#a407a6d51ebdbc42b00d0c811b95d8e9d">VertexAttrib::type</a></div><div class="ttdeci">AttribType type</div><div class="ttdoc">type of attribute</div><div class="ttdef"><b>Definition</b> gpu.hpp:227</div></div>
<div class="ttc" id="astructVertexAttrib_html_a4578d3605e0f61b7bfd1f5e24df7c9bf"><div class="ttname"><a href="structVertexAttrib.html#a4578d3605e0f61b7bfd1f5e24df7c9bf">VertexAttrib::bufferID</a></div><div class="ttdeci">int32_t bufferID</div><div class="ttdoc">buffer id</div><div class="ttdef"><b>Definition</b> gpu.hpp:224</div></div>
<div class="ttc" id="astructVertexAttrib_html_a58f3129f893d0ce72ec7d364fef21840"><div class="ttname"><a href="structVertexAttrib.html#a58f3129f893d0ce72ec7d364fef21840">VertexAttrib::offset</a></div><div class="ttdeci">uint64_t offset</div><div class="ttdoc">offset in bytes</div><div class="ttdef"><b>Definition</b> gpu.hpp:226</div></div>
<div class="ttc" id="astructVertexAttrib_html_aef250d71bce43e96a6efb9180f24d079"><div class="ttname"><a href="structVertexAttrib.html#aef250d71bce43e96a6efb9180f24d079">VertexAttrib::stride</a></div><div class="ttdeci">uint64_t stride</div><div class="ttdoc">stride in bytes</div><div class="ttdef"><b>Definition</b> gpu.hpp:225</div></div>
</div><!-- fragment --><p>Paměť <a class="el" href="structGPUMemory.html">GPUMemory</a> obsahuje <a class="el" href="structBuffer.html">Buffer(y)</a> </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>{</div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa73d331b9be494e550928fad4ac6c23d">maxUniforms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a3798310241309de18f5561931d1d2665">maxVertexArrays</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a8fa73be85fde25818e8b63d71fd7dd60">maxTextures</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a0be973077c6d15f40e31d0781b1ea8e6">maxBuffers</a>           = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa8e57983bda33e4ef48e825d5bf261eb">maxPrograms</a>          = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#ad9cda42fea22fb0d5347a91f101d15d2">maxFramebuffers</a>      = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7f32178fb1950dde77a2133bb93bbe5b">defaultFramebuffer</a>   = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structBuffer.html">Buffer</a>          *<a class="code hl_variable" href="structGPUMemory.html#a4755d327262c8020766718bb31f92d0b">buffers</a>              = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structTexture.html">Texture</a>         *<a class="code hl_variable" href="structGPUMemory.html#ac07704dd918f18a48644abdabbdf6f0d">textures</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_union" href="unionUniform.html">Uniform</a>         *<a class="code hl_variable" href="structGPUMemory.html#a21eab797fb058f9cc8ceb26d5993f018">uniforms</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structProgram.html">Program</a>         *<a class="code hl_variable" href="structGPUMemory.html#a50091de928f20fa9d84c6bd137dab3a6">programs</a>             = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structFramebuffer.html">Framebuffer</a>     *<a class="code hl_variable" href="structGPUMemory.html#abd0d80589104a936db46ae766bc7975e">framebuffers</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  <a class="code hl_struct" href="structVertexArray.html">VertexArray</a>     *<a class="code hl_variable" href="structGPUMemory.html#acab4bb492d24e78131d39ea7997266cb">vertexArrays</a>         = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#acd06344c1c43bef8df606d6664fee4b4">activatedFramebuffer</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#a7b289e72424eb0cf9b7aa920386f7565">activatedProgram</a>     = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#af2f8e1efb9217022ced48eeb04b79810">activatedVertexArray</a> = 0      ; </div>
<div class="line">  uint32_t         <a class="code hl_variable" href="structGPUMemory.html#aa6541055bfd7af94a91f35bfe0cd9aad">gl_DrawID</a>            = 0      ; </div>
<div class="line">  <a class="code hl_struct" href="structStencilSettings.html">StencilSettings</a>  <a class="code hl_variable" href="structGPUMemory.html#a00d576026cb037973a8cdb85ba6e5498">stencilSettings</a>               ; </div>
<div class="line">  <a class="code hl_struct" href="structBlockWrites.html">BlockWrites</a>      <a class="code hl_variable" href="structGPUMemory.html#ac8733e2ed174d07681ccb20407ac2933">blockWrites</a>                   ; </div>
<div class="line">  <a class="code hl_struct" href="structBackfaceCulling.html">BackfaceCulling</a>  <a class="code hl_variable" href="structGPUMemory.html#a08ac73715dd9138f6dfc6b04b7ec3860">backfaceCulling</a>               ; </div>
<div class="line"> </div>
<div class="line">  <span class="comment">//Do not worry about these.</span></div>
<div class="line">  <span class="comment">//This is just to suppress valgrind warnings because of the large stack.</span></div>
<div class="line">  <span class="comment">//Otherwise everything would be placed on the stack and not on the heap.</span></div>
<div class="line">  <span class="comment">//I had to allocated this structure on the heap, because it is too large.</span></div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>();                 </div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#a9b333f6f69347068f349d05961c7bf39">GPUMemory</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">  <a class="code hl_function" href="structGPUMemory.html#aba0548cad16f8557782a5b2a409685b0">~GPUMemory</a>();                </div>
<div class="line">  <a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a>&amp;<a class="code hl_function" href="structGPUMemory.html#a59c169462c028204dfca9b92f5cd9230">operator=</a>(<a class="code hl_struct" href="structGPUMemory.html">GPUMemory</a> <span class="keyword">const</span>&amp;o);</div>
<div class="line">};</div>
</div><!-- fragment --><p><a class="el" href="structBuffer.html">Buffer</a> je struktura obsahují pointer a velikost. </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structBuffer.html">Buffer</a>{</div>
<div class="line">  <span class="keywordtype">void</span> <span class="keyword">const</span>* <a class="code hl_variable" href="structBuffer.html#a8fbe8b3fba53c8ff7fcd44f9c4f463c7">data</a> = <span class="keyword">nullptr</span>; </div>
<div class="line">  uint64_t    <a class="code hl_variable" href="structBuffer.html#a3d37b3ab0942c1222347f8de7520f9ef">size</a> = 0      ; </div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="sss_vertexAssembly_outputs"></a>
Výstupy:</h3>
<p>Strukura <a class="el" href="structInVertex.html">InVertex</a> vypadá takto: </p><div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structInVertex.html">InVertex</a>{</div>
<div class="line">  <a class="code hl_union" href="unionAttrib.html">Attrib</a>   <a class="code hl_variable" href="structInVertex.html#a90ec7fd87b6a7f776638cd5aa23f2ecb">attributes</a>[<a class="code hl_variable" href="solutionInterface_2src_2solutionInterface_2gpu_8hpp.html#a8938ad0ed0735df8ab181ffadae5f489">maxAttribs</a>]    ; </div>
<div class="line">  uint32_t <a class="code hl_variable" href="structInVertex.html#aa4d31911053492bffe4b41dae12ee000">gl_VertexID</a>            = 0; </div>
<div class="line">};</div>
</div><!-- fragment --><p>Data atributu vypadají takto: </p><div class="fragment"><div class="line"><span class="keyword">union </span><a class="code hl_union" href="unionAttrib.html">Attrib</a>{</div>
<div class="line">  <a class="code hl_union" href="unionAttrib.html">Attrib</a>():<a class="code hl_variable" href="unionAttrib.html#a696593a1622617ea27804091988b9c6f">v4</a>(glm::vec4(1.f)){}</div>
<div class="line">  <span class="keywordtype">float</span>      <a class="code hl_variable" href="unionAttrib.html#a929882245d506dfa31022f10d12a9ad6">v1</a>; </div>
<div class="line">  glm::vec2  <a class="code hl_variable" href="unionAttrib.html#ac4dfb066bf0f2631cf74bd1d9c40e07b">v2</a>; </div>
<div class="line">  glm::vec3  <a class="code hl_variable" href="unionAttrib.html#ae33a694a9c3ba540167b192fd83eb767">v3</a>; </div>
<div class="line">  glm::vec4  <a class="code hl_variable" href="unionAttrib.html#a696593a1622617ea27804091988b9c6f">v4</a>; </div>
<div class="line">  uint32_t   <a class="code hl_variable" href="unionAttrib.html#ae0e1021f00fb48b7455a5dce14e9e043">u1</a>; </div>
<div class="line">  glm::uvec2 <a class="code hl_variable" href="unionAttrib.html#ae52385fd24c40ddf0e739b02805ee223">u2</a>; </div>
<div class="line">  glm::uvec3 <a class="code hl_variable" href="unionAttrib.html#a5cdee2c35b06a7cea44de8fd65a1a025">u3</a>; </div>
<div class="line">  glm::uvec4 <a class="code hl_variable" href="unionAttrib.html#a5940b2a6c6d819a502e1e0921c061974">u4</a>; </div>
<div class="line">};</div>
<div class="ttc" id="aunionAttrib_html_a5940b2a6c6d819a502e1e0921c061974"><div class="ttname"><a href="unionAttrib.html#a5940b2a6c6d819a502e1e0921c061974">Attrib::u4</a></div><div class="ttdeci">glm::uvec4 u4</div><div class="ttdoc">vector of four unsigned ints</div><div class="ttdef"><b>Definition</b> gpu.hpp:98</div></div>
<div class="ttc" id="aunionAttrib_html_a5cdee2c35b06a7cea44de8fd65a1a025"><div class="ttname"><a href="unionAttrib.html#a5cdee2c35b06a7cea44de8fd65a1a025">Attrib::u3</a></div><div class="ttdeci">glm::uvec3 u3</div><div class="ttdoc">vector of three unsigned ints</div><div class="ttdef"><b>Definition</b> gpu.hpp:97</div></div>
<div class="ttc" id="aunionAttrib_html_a696593a1622617ea27804091988b9c6f"><div class="ttname"><a href="unionAttrib.html#a696593a1622617ea27804091988b9c6f">Attrib::v4</a></div><div class="ttdeci">glm::vec4 v4</div><div class="ttdoc">vector of four floats</div><div class="ttdef"><b>Definition</b> gpu.hpp:94</div></div>
<div class="ttc" id="aunionAttrib_html_a929882245d506dfa31022f10d12a9ad6"><div class="ttname"><a href="unionAttrib.html#a929882245d506dfa31022f10d12a9ad6">Attrib::v1</a></div><div class="ttdeci">float v1</div><div class="ttdoc">single float</div><div class="ttdef"><b>Definition</b> gpu.hpp:91</div></div>
<div class="ttc" id="aunionAttrib_html_ac4dfb066bf0f2631cf74bd1d9c40e07b"><div class="ttname"><a href="unionAttrib.html#ac4dfb066bf0f2631cf74bd1d9c40e07b">Attrib::v2</a></div><div class="ttdeci">glm::vec2 v2</div><div class="ttdoc">vector of two floats</div><div class="ttdef"><b>Definition</b> gpu.hpp:92</div></div>
<div class="ttc" id="aunionAttrib_html_ae0e1021f00fb48b7455a5dce14e9e043"><div class="ttname"><a href="unionAttrib.html#ae0e1021f00fb48b7455a5dce14e9e043">Attrib::u1</a></div><div class="ttdeci">uint32_t u1</div><div class="ttdoc">single unsigned int</div><div class="ttdef"><b>Definition</b> gpu.hpp:95</div></div>
<div class="ttc" id="aunionAttrib_html_ae33a694a9c3ba540167b192fd83eb767"><div class="ttname"><a href="unionAttrib.html#ae33a694a9c3ba540167b192fd83eb767">Attrib::v3</a></div><div class="ttdeci">glm::vec3 v3</div><div class="ttdoc">vector of three floats</div><div class="ttdef"><b>Definition</b> gpu.hpp:93</div></div>
<div class="ttc" id="aunionAttrib_html_ae52385fd24c40ddf0e739b02805ee223"><div class="ttname"><a href="unionAttrib.html#ae52385fd24c40ddf0e739b02805ee223">Attrib::u2</a></div><div class="ttdeci">glm::uvec2 u2</div><div class="ttdoc">vector of two unsigned ints</div><div class="ttdef"><b>Definition</b> gpu.hpp:96</div></div>
</div><!-- fragment --><h3><a class="anchor" id="sss_vertexAssembly_attribTask"></a>
Úkol:</h3>
<p>Vašim úkolem je správně číst data atributů z paměti a zapisovat je do struktury <a class="el" href="structInVertex.html" title="[Attrib]">InVertex</a>.</p>
<p>Po těchto úkolech byste měli mít hotovou vertexovou část. To je část, před sestavením primitiv (Primitiv Assembly Unit). </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
